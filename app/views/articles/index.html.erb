<div class="container">
  <div class="display-4">
    <ion-icon name="home"></ion-icon> 
  </div>  
  <% if signed_in? %>
  <%= link_to 'Mi Perfil', profile_index_path, class:"btn btn-secondary rounded mb-1" %>
  <% end %> <br> 
  <div class="row justify-content-between">
    <div class="col-3">  
      <%= link_to "Nueva Categoría", new_category_url, class:"btn btn-secondary mb-1" %>
      <br> 
      <ul class="list-group" id="menu-prin">
        
        <% i = 4 %>
        <% @categories.each do |categoria| %>
          <div class="badge badge-primary, text-secondary">          
            <li class="ret<%= i+=1 %> list-group-item animated fadeInLeft">
                <%= link_to categoria.name.upcase, categoria %>
                <%= categoria.articles.count %>
            </li>
          </div>
          <div class="mb-1">
          </div>    
        <% end %>
      </ul>
    </div>  
    <div class="col-9">    
      <table class="table table-hover ">
        <thead>
          <tr>
            <th>Title</th>
            <th>Text</th>
            <th>Usuario</th>
            <th>Likes</th>
            <th>Categoría</th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>  
          <% @articles.each do |article| %>
            <tr>
              <td><%= (article.title).capitalize %></td>
              <td><%= article.text %></td>
              <td><%= article.user.name_or_email %></td>
              <td><%= article.likes.count %> <%= (article.likes.count) == 1 ? 'Like' : 'Likes' %></td>
              <td>
                  <ul>
                    <%article.categories.each do |category|%>
                      <li><%= category.name %></li>
                      <hr>
                    <%end%>
                  </ul>
              </td>

              <td>
                  <!-- Example split danger button -->
                  <div class="btn-group">
                  <%= link_to 'Ver', article_path(article), class:"btn btn-secondary" %>
                <% if signed_in? && current_user == article.user %>    
                    <button type="button" class="btn btn-primary rounded dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <ion-icon name="settings" class="pt-2"></ion-icon>              
                    </button>
                      
                    <div class="dropdown-menu">
                      <%= link_to 'Editar', edit_article_path(article), class: "dropdown-item" %>
                      
                      <%= link_to 'Eliminar', article_path(article),
                                method: :delete,
                                data: { confirm: 'Are you sure?' }, class: "dropdown-item" %>
                      <a class="dropdown-item" href="#">Another action</a>
                      <a class="dropdown-item" href="#">Something else here</a>
                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="#">Separated link</a>
                    </div>
                  </div>
                <% end %>   
              </td> 
            </tr>
          <% end %>
        </tbody>    
      </table> <br>
    </div>
  </div>      
  <%= link_to 'INICIO', welcome_index_path %>
</div>

